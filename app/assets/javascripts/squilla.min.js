var Squilla;!function(t){function e(){return{tests:{}}}t.emptyConfigData=e}(Squilla||(Squilla={}));var Squilla;!function(t){function e(t){if(!t)return null;var e=t;if("undefined"!=typeof t.cookieName&&(e.storeKeyName=t.cookieName),"undefined"!=typeof t.remakeCookie&&(e.remakeValue=t.remakeCookie),"undefined"!=typeof t.patterns)for(var n=0,r=t.patterns.length;r>n;n++)"undefined"!=typeof t.patterns[n].cookie&&(e.patterns[n].range=t.patterns[n].cookie);return e}function n(n){var r=t.emptyConfigData();if(!n)return r;if("undefined"!=typeof n.tests)for(var o in n.tests)r.tests[o]=e(n.tests[o]);return r}t.convertTestConfigData=e,t.convertConfigData=n}(Squilla||(Squilla={}));var Squilla;!function(t){var e=function(){function e(t){this.setConfigData(t)}return e.prototype.setConfigData=function(e){e?this.data=t.convertConfigData(e):this.data=t.emptyConfigData()},e.prototype.getTest=function(t){return this.data?this.data.tests[t]:null},e.prototype.getTests=function(){return this.data?this.data.tests:null},e.prototype.setTest=function(e,n){this.data||this.setConfigData(null),this.data.tests=this.data.tests||{},this.data.tests[e]=t.convertTestConfigData(n)},e}();t.Config=e}(Squilla||(Squilla={}));var Squilla;!function(t){function e(t){g=t}function n(){return g}function r(t){d=t}function o(){return d}function i(t){v=t}function a(){return v}function u(t){y=t}function s(){return y}function l(t){S=t}function c(){return S}function f(t,e){}function p(e){var n=e;t.sendResult=function(t,e){void 0===e&&(e=g),n(t,e)}}var g="X";t.setOriginalPattern=e,t.getOriginalPattern=n;var d=14;t.setTestCookieExpiresDate=r,t.getTestCookieExpiresDate=o;var v="_squilla";t.setStorageKeyName=i,t.getStorageKeyName=a;var y=14;t.setStorageExpiresDate=u,t.getStorageExpiresDate=s,function(t){t[t.cookie=0]="cookie",t[t.localStorage=1]="localStorage"}(t.StoreType||(t.StoreType={}));var h=t.StoreType,S=h.cookie;t.setStoreType=l,t.getStoreType=c,t.sendResult=f,t.setSendResultFunction=p}(Squilla||(Squilla={}));var Squilla;!function(t){function e(){var t=function(){return navigator&&navigator.userAgent?navigator.userAgent:null}();return!t||!/^Mozilla|^DoCoMo|^KDDI|^SoftBank|^Opera|^Dalvik|^BlackBerry/.test(t)||/[b|B]ot|[c|C]rawler|[s|S]pider/.test(t)}function n(t,e){var n,r=!1,o=document;if(t())return void e();var i=function(){return"interactive"===o.readyState?void(r||t()&&(r=!0,e())):void("complete"===o.readyState&&(r||(r=!0,t()&&e())))};o.addEventListener?o.addEventListener("readystatechange",i):o.onreadystatechange=i,n=setInterval(function(){return r?void clearInterval(n):void(t()&&(clearInterval(n),r=!0,e()))},0)}function r(t,e){var r,o=document;"undefined"==typeof jQuery?(o.querySelectorAll||(r=function(){return!1}),r=function(){return o.querySelectorAll(t).length>0}):r=function(){return jQuery(t).length>0},n(r,e)}function o(t,e){n(function(){return"undefined"!=typeof window[t]},e)}function i(t){u(t.css),s(t.script)}function a(t){if("undefined"!=typeof t&&t.length>0)for(var e=document.getElementsByTagName("head")[0],n=0;n<t.length;n++){var r=t[n],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=r,o.media="all",e.appendChild(o),setTimeout(function(t){return function(){e.removeChild(t)}}(o),10)}}function u(t){if("undefined"!=typeof t&&t.length>0)for(var e=document.getElementsByTagName("head")[0],n=0;n<t.length;n++){var r=t[n],o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=r,o.media="all",e.appendChild(o)}}function s(t){if("undefined"!=typeof t&&t.length>0)for(var e=document.getElementsByTagName("head")[0],n=0;n<t.length;n++){var r=t[n];if("complete"===document.readyState){var o=document.createElement("script");o.type="text/javascript",o.src=r,e.appendChild(o)}else document.write(["<scr",'ipt type="text/javascript" src="',r,'"></scr',"ipt>"].join(""))}}function l(){try{var t=window.localStorage;if(!t)return!1;if(!("getItem"in t&&"setItem"in t&&"removeItem"in t))return!1;var e="__squilla__check__",n="check";return t.setItem(e,n),t.getItem(e)!==n?!1:(t.removeItem(e),!0)}catch(r){return!1}}t.isBot=e,t.triggerBySelector=r,t.triggerByVariable=o,t.addResources=i,t.preLoadStyleResources=a,t.addStyleResources=u,t.addScriptResources=s,t.isLocalStorageEnable=l}(Squilla||(Squilla={}));var Squilla;!function(t){var e=function(){function e(e,n){this.events={begin:function(){},end:function(){}},this.testVal=null,this.addtionalStyles=[];var r=n.getTest(e);if(r){if("undefined"!=typeof r.stopDate)try{var o=Date.parse(r.stopDate+" 00:00:00 GMT+0900");if(o<=(new Date).getTime())return}catch(i){return}var a=t.TestStoreManager.getTestStore(n);if(a.isEnable()){this.testVal=a.getVal(e),this.testName=e,this.testConfig=r;var u=a.checkPattern(e);this.pattern=null!==u?u.pattern:void 0,u&&"undefined"!=typeof u.additionalResources&&(t.addScriptResources(u.additionalResources.script),this.addtionalStyles=u.additionalResources.css,t.preLoadStyleResources(this.addtionalStyles))}}}return e.prototype.on=function(t,e){return"function"==typeof this.events[t]?(this.events[t]=e,this):this.pattern?(t===this.pattern&&(this.testProc=e),this):this},e.prototype.begin=function(t){return this.on("begin",t)},e.prototype.end=function(t){return this.on("end",t)},e.prototype.proc=function(t,e){return this.on(t,e)},e.prototype.run=function(){if(!t.isBot()){if(t.addStyleResources(this.addtionalStyles),this.events.begin(),"function"==typeof this.testProc&&this.testProc(),null!==this.testVal){var e=this.testConfig;t.sendResult("string"==typeof e.testKey?e.testKey:this.testName,this.pattern)}this.events.end()}},e}();t.Test=e}(Squilla||(Squilla={}));var Squilla;!function(t){function e(){return"Squilla 0.1.1 187de8a build: 2016-01-08T04:26Z"}function n(e){a=new t.Config(e)}function r(e,n){a=a||new t.Config(null),a.setTest(e,n)}function o(e){var n=new t.Test(e,a);return n}function i(){return a}var a;t.version=e,t.init=n,t.setTestConfig=r,t.test=o,t.__c=i}(Squilla||(Squilla={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Squilla;!function(t){var e=function(){function t(t){this.config=t}return t.prototype.getTestConfig=function(t){if(!this.isEnable())return null;if(!this.config)return null;var e=this.config.getTest(t);return e?e:null},t.prototype.getStoreKey=function(t){var e=this.getTestConfig(t);return e?e.storeKeyName?e.storeKeyName:t:null},t.prototype.getVal=function(t){var e=this,n=this.getTestConfig(t);if(!n)return null;var r=function(t,n){var r=e.getItem(t);return null===r&&n&&(r=0|100*Math.random()),r}(this.getStoreKey(t),"boolean"==typeof n.remakeValue?n.remakeValue:!0);return null!==r&&this.setVal(t,r),r},t.prototype.setVal=function(t,e){var n=this.getStoreKey(t);n&&this.setItem(n,e)},t.prototype.checkPattern=function(t){var e=this.getTestConfig(t);if(!e)return null;var n=function(t,e){if(null!==t)for(var n=0;n<e.length;n++){var r=e[n];if(r.range&&r.range.min<=t&&t<=r.range.max)return r}return null}(this.getVal(t),e.patterns);return n},t}();t.TestStore=e;var n,r=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.isEnable=function(){return"cookie"in document},n.prototype.getItem=function(t){for(var e=document.cookie.split(";"),n=0;n<e.length;n++){var r=e[n],o=r.split("="),i=decodeURIComponent(o.shift()).replace(" ","");if(i===t)return+decodeURIComponent(o.shift())}return null},n.prototype.setItem=function(e,n){var r=encodeURIComponent(e)+"="+encodeURIComponent(n.toString())+"; path=/",o=t.getTestCookieExpiresDate();if(o){var i=new Date;i.setDate(i.getDate()+o),r+="; expires="+i.toUTCString()}document.cookie=r},n}(e),o=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n.prototype.isEnable=function(){return t.isLocalStorageEnable()},n.prototype.getStorageData=function(){var e=localStorage.getItem(t.getStorageKeyName());if(!e)return null;try{return JSON.parse(e)}catch(n){return null}},n.prototype.clearStorageData=function(t){var e={},n=(new Date).getTime();for(var r in t){var o=t[r];o.expires<n&&(e[r]=!0)}for(var i in e)delete t[i]},n.prototype.getItem=function(t){var e=this.getStorageData();if(!e)return null;var n=e[t];return"undefined"==typeof n?null:n.expires<(new Date).getTime()?null:n.value},n.prototype.setItem=function(e,n){var r=this.getStorageData();r||(r={}),this.clearStorageData(r);var o=function(){var e=t.getStorageExpiresDate();if(e){var n=new Date;return n.setDate(n.getDate()+e),n.getTime()}return 0}();r[e]={value:n,expires:o},localStorage.setItem(t.getStorageKeyName(),JSON.stringify(r))},n}(e);!function(e){function n(e){var n=i[t.getStoreType()];return new n(e)}var i={};i[t.StoreType.cookie]=r,i[t.StoreType.localStorage]=o,e.getTestStore=n}(n=t.TestStoreManager||(t.TestStoreManager={}))}(Squilla||(Squilla={}));